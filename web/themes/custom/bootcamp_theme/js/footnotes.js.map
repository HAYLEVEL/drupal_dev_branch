{"version":3,"file":"footnotes.js","names":["$","Drupal","behaviors","footnotes","attach","context","once","forEach","btn","on","this","siblings","toggleClass","length","document","event","$activeFootnotes","$target","target","undefined","each","closest","is","jQuery"],"sources":["footnotes.js"],"mappings":"CAAA,SAAWA,EAAGC,GAOZA,EAAOC,UAAUC,UAAY,CAI3BC,OAAQ,SAAUC,GAChBC,KAAK,kBAAmB,4BAA6BD,GAASE,SAASC,IACxDR,EAAEQ,GACVC,GAAG,SAAS,WACfT,EAAEU,MAAMC,SAAS,4BAA4BC,YAAY,SAC3D,GAAC,IAKEN,KAAK,6BAA8B,QAAQO,QAKhDb,EAAEc,UAAUL,GAAG,SAAS,SAAUM,GAChC,IAAIC,EAAmBhB,EAAE,mCACrBiB,EAAUjB,EAAEe,EAAMG,aACGC,IAArBH,GACFA,EAAiBI,MAAK,YACfH,EAAQI,QAAQ,gCAAgCR,QAChDb,EAAEU,MAAMY,GAAG,aACdtB,EAAEU,MAAME,YAAY,SAExB,GAEJ,GACF,EAEH,CAxCD,CAwCGW,OAAQtB","ignoreList":[],"sourcesContent":["(function ($, Drupal) {\n\n  /**\n   * JS behaviors for footnotes.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.footnotes = {\n    /**\n     * Toggles a class on click.\n     */\n    attach: function (context) {\n      once('toggleFootnotes', 'button.footnote__citation', context).forEach((btn) => {\n        const $btn = $(btn);\n        $btn.on('click', function () {\n          $(this).siblings('.footnote__citation-text').toggleClass('active');\n        })\n      });\n\n      // Handle \"outside\" click. So if user clicks on anywhere outside\n      // footnote wrapper - close it.\n      if (!once('toggleOutsideFootnoteClick', 'html').length) {\n        // Early return avoid changing the indentation\n        // for the rest of the code.\n        return;\n      }\n      $(document).on('click', function (event) {\n        let $activeFootnotes = $('.footnote__citation-text.active');\n        let $target = $(event.target);\n        if ($activeFootnotes !== undefined) {\n          $activeFootnotes.each(function () {\n            if (!$target.closest('.footnote__citations-wrapper').length\n              && $(this).is(':visible')) {\n              $(this).toggleClass('active');\n            }\n          })\n        }\n      })\n    },\n  };\n})(jQuery, Drupal);\n"]}